# 🛡️ 가디언 에이전트 v2.0 - 프로젝트 상태 분석 시스템

> 전체 프로젝트 흐름을 모니터링하고 누락/개선점을 분석합니다.
> 주간 점검 또는 "가디언 리포트" 요청 시 이 파일을 참조합니다.

---

## 📊 시스템 헬스 현황

### 용량 임계치 기준

| 항목 | 🟢 정상 | 🟡 주의 | 🔴 위험 |
|------|--------|--------|--------|
| 전체 용량 (코드만) | <400MB | 400~500MB | 500MB+ |
| node_modules | <350MB | 350~400MB | 400MB+ |
| mcp-servers | <50MB | 50~100MB | 100MB+ |
| 임시 파일 | <50MB | 50~100MB | 100MB+ |
| 단일 파일 | <5MB | 5~10MB | 10MB+ |

### 최근 측정 (2025-01-29)

| 항목 | 용량 | 상태 |
|------|------|------|
| 전체 프로젝트 | ~441 MB | 🟢 정상 |
| node_modules | 308 MB | 🟢 정상 |
| mcp-servers | 1.9 MB | 🟢 정상 |
| 코드만 | ~130 MB | 🟢 정상 |

### 정리 이력

| 날짜 | 작업 | 절감량 |
|------|------|--------|
| 2025-01-29 | mcp-servers/.venv 정리 (9개) | -449 MB |
| 2025-01-29 | tmpclaude-* 폴더 정리 (25개) | - |

---

## 📂 프로젝트 구조 점검 체크리스트

### 필수 디렉토리

```
daily-miracles-mvp/
├── CLAUDE.md              # [필수] 자동 실행 지침
├── GUARDIAN.md            # [필수] 이 파일
├── routes/                # API 엔드포인트
├── services/              # 비즈니스 로직
├── utils/                 # 유틸리티
├── config/                # 설정 파일
├── skills/design-system/  # 디자인 시스템
├── frameworks/            # 콘텐츠 프레임워크
├── docs/                  # 문서
├── mcp-servers/           # MCP 서버 (Python)
└── database/              # DB 스키마/쿼리
```

---

## 👤 소원이 여정 완성도 체크

### 핵심 플로우 1: 분석 서비스

```
[x] 랜딩 페이지 접근
[x] "시작하기" 클릭
[x] 12개 질문 응답
[x] 분석 처리 (로딩)
[x] 결과 페이지 표시
[x] PDF 다운로드
[ ] 카카오톡 공유
[x] 7일 응원 메시지 수신 시작
```

### 핵심 플로우 2: 문의 응답

```
[x] 소원이가 카카오톡 문의
[x] 문의 유형 자동 분류
[x] 적절한 템플릿으로 자동 응답
[x] 복잡한 문의 → 에스컬레이션
[x] 담당자 알림 (Slack)
[ ] 24시간 내 응답 완료 추적
```

### 핵심 플로우 3: 여수기적여행

```
[x] 견적 페이지 접근
[x] 날짜/인원/목적 선택
[x] 실시간 견적 계산
[x] 예약 요청 제출
[x] 담당자 이메일 수신
[x] 고객 확인 메시지 발송
```

---

## 🔗 기능 연결 맵

### API ↔ 서비스 ↔ UI 연결

```
[UI 컴포넌트]     [API 엔드포인트]     [서비스]              [외부 연동]
─────────────────────────────────────────────────────────────────────────
분석 시작 버튼 → POST /api/wish     → wishIntakeService  → OpenAI API
결과 페이지    → GET /api/result    → miracleScoreEngine → DB 조회
PDF 다운로드   → GET /api/roadmap   → itineraryService   → 파일 생성
메시지 발송    → POST /api/notify   → messageProvider    → Naver SENS
견적 계산      → POST /api/quote    → quoteEngine        → 가격 DB
자동 응답      → (웹훅)             → autoResponseService→ 분류 + 발송
```

---

## 📋 주간 점검 항목

매주 월요일 "가디언 리포트" 요청 시 분석:

### 1. 완성도 분석

- [ ] 핵심 플로우 1~3 모두 동작하나?
- [ ] 에러 처리가 모든 엔드포인트에 있나?
- [ ] 로깅이 주요 작업에 추가되어 있나?

### 2. 품질 분석

- [ ] 테스트 코드 존재하나?
- [ ] 성능 병목 지점 있나?
- [ ] 보안 취약점 있나?

### 3. 일관성 분석

- [ ] 브랜드 가이드 준수하나?
- [ ] 코드 스타일 일관성 있나?
- [ ] 문서화 최신 상태인가?

### 4. 누락 기능 분석

- [ ] 사용자가 필요로 하지만 없는 기능?
- [ ] 구현했지만 연결 안 된 기능?
- [ ] 계획했지만 미구현 기능?

### 5. 시스템 헬스 분석

- [ ] 전체 용량 400MB 이하?
- [ ] 대용량 파일(10MB+) 없음?
- [ ] 임시 파일 정리 완료?
- [ ] mcp-servers 가상환경 정리?

---

## 💡 제안 우선순위 기준

| 레벨 | 기준 | 예시 |
|------|------|------|
| P0 | 서비스 중단/보안/용량 위험 | 결제 오류, 인증 실패, 500MB 초과 |
| P1 | 사용자 경험 저하 | 느린 로딩, 에러 메시지 없음 |
| P2 | 개선 가능 | UX 개선, 성능 최적화 |
| P3 | 있으면 좋음 | 추가 기능, 편의 기능 |

---

## 📊 리포트 템플릿

"가디언 리포트" 요청 시 출력:

```
═══════════════════════════════════════════════════════
📊 가디언 주간 리포트 v2.0
생성일: [날짜]
═══════════════════════════════════════════════════════

📈 프로젝트 완성도: [X]%

───────────────────────────────────────────────────────
【시스템 헬스】

전체 용량: [X] MB [🟢/🟡/🔴]
node_modules: [X] MB [🟢/🟡/🔴]
mcp-servers: [X] MB [🟢/🟡/🔴]
대용량 파일: [있음/없음]
임시 파일: [정리 완료/정리 필요]

───────────────────────────────────────────────────────
【기능 상태】

✅ 정상 작동:
- [목록]

⚠️ 점검 필요:
- [목록]

❌ 미구현/누락:
- [목록]

───────────────────────────────────────────────────────
💡 이번 주 권장 작업:

P0 (즉시):
1. [작업]

P1 (이번 주):
1. [작업]
2. [작업]

P2 (다음 주):
1. [작업]

───────────────────────────────────────────────────────
🔗 연결성 이슈:
- [있으면 기재]

🎨 일관성 이슈:
- [있으면 기재]

🧹 정리 제안:
- [정리하면 확보 가능한 용량 기재]

═══════════════════════════════════════════════════════
```

---

## 🔄 자동화된 체크 명령어

### 용량 체크

```bash
# 전체 프로젝트 용량
du -sh .

# 디렉토리별 용량 (상위 10개)
du -h --max-depth=1 | sort -hr | head -10

# 대용량 파일 (5MB 이상)
find . -type f -size +5M -exec ls -lh {} \; 2>/dev/null | grep -v node_modules
```

### 필수 파일 체크

```bash
ls CLAUDE.md GUARDIAN.md skills/design-system/designsystem.json frameworks/stick-principles.json
```

### 금지어 체크

```bash
grep -r "운세\|사주\|관상\|점술" --include="*.js" --include="*.md" .
```

### 임시 파일 체크

```bash
# tmpclaude 폴더 확인
ls -d tmpclaude-* 2>/dev/null | wc -l

# .venv 폴더 확인 (mcp-servers)
ls -d mcp-servers/*/.venv 2>/dev/null
```

---

## 📁 핵심 파일 인덱스

### 디자인/브랜드

| 파일 | 용도 |
|------|------|
| `skills/design-system/designsystem.json` | 컬러, 폰트, 간격 토큰 |
| `skills/design-system/brand-voice.md` | 톤앤매너 가이드 |
| `skills/design-system/forbidden-words.json` | 금지어 목록 |

### 콘텐츠 프레임워크

| 파일 | 용도 |
|------|------|
| `frameworks/stick-principles.json` | 스틱 6원칙 |
| `frameworks/story-designer-templates.json` | 스토리 템플릿 |
| `frameworks/hook-patterns.json` | 후크 패턴 |
| `utils/reverseOrderPrompt.js` | 역순 전략 유틸 |

### 자동 응답

| 파일 | 용도 |
|------|------|
| `utils/inquiryClassifier.js` | 문의 분류 |
| `services/autoResponseService.js` | 자동 응답 |
| `services/messageProvider.js` | SENS 발송 |

### 핵심 서비스

| 파일 | 용도 |
|------|------|
| `services/miracleScoreEngine.js` | 기적지수 계산 |
| `services/itineraryService.js` | 여정 생성 |
| `services/quoteEngine.js` | 견적 계산 |

### 유틸리티

| 파일 | 용도 |
|------|------|
| `utils/dateFormatter.js` | 날짜 포맷 |

---

## 🚨 알려진 이슈 트래킹

| ID | 상태 | 설명 | 우선순위 |
|----|------|------|----------|
| ISS-001 | 대기 | SENS 템플릿 4종 검수 대기 | P1 |
| ISS-002 | 대기 | 카카오톡 공유 기능 미구현 | P2 |
| ISS-003 | 대기 | 24시간 미응답 추적 자동화 | P2 |

---

## 📅 정기 점검 스케줄

| 주기 | 점검 항목 | 담당 |
|------|----------|------|
| 매일 | 임시 파일 정리 | 자동/수동 |
| 주간 (월) | 가디언 리포트 생성 | Claude Code |
| 주간 | mcp-servers 가상환경 체크 | 수동 |
| 월간 | 전체 용량 분석 | Claude Code |
| 월간 | 미사용 의존성 정리 | 수동 |

---

*생성일: 2025-01-29*
*마지막 업데이트: 2025-01-29 (v2.0)*

According to a document from **2025-12-29~30**, Aurora5는 **에이전트/스킬/파이프라인을 레포에 고정(SSOT)**하고, **95% 자동화(신호등: 95% 자동 + 4% 검토 + 1% 개입)**를 목표로 운영하는 방식이 이미 정리돼 있어요.
또 “스킬/에이전트는 MD로 정의하고, 메타 에이전트(SkillCreator)가 새 에이전트를 자동 생성”하는 규격도 문서에 명시돼 있습니다.

푸르미르님이 말한 문제(“자료만 모으면 의미 없고, **정보로 가공**되게 해야 한다”)는 그래서 이렇게 풀면 됩니다:

---

# ✅ 결론: “변경사항 → 정보”로 자동 가공하는 **Change→Insight 파이프라인**을 레포에 박는다

**Code가 커밋/푸시할 때마다** 다음 산출물이 자동으로 생기게 만드는 거예요.

* (1) 이번 변경의 **핵심 요약(What/Why/Impact)**
* (2) 영향을 받는 문서/자산(캐릭터 바이블/나노바나나 프롬프트/스토리북 규격) **자동 업데이트 지시**
* (3) **캐릭터 일관성 QA 게이트** 통과 여부(초록/노랑/빨강)
* (4) 최종적으로 팀이 보는 **Release Note / 작업 로그 / 다음 액션**

이 구조를 만들면 “자료 축적”이 아니라 “지식 갱신”이 됩니다.

---

# 1) Code에게 주는 지시서(핵심): “푸시하면 자동으로 문서가 갱신되게”

아래를 **그대로 Code 작업 지시서**로 전달하세요.

## 📌 [P0 지시] Change→Insight 자동 가공 시스템 만들기

### 목표

* Code가 변경사항을 올릴 때마다 **문서가 자동으로 ‘정보 형태’로 갱신**된다.
* 캐릭터 일관성 관련 변경은 **무조건 QA 게이트를 거치고** 결과가 기록된다.
* 운영 원칙은 “95% 자동 + 4% 검토 + 1% 개입” 신호등을 따른다.

### 레포에 생성할 것(필수 4개)

1. `claude/pipelines/change-intel.md` (파이프라인 정의)
2. `claude/agents/change-summarizer.md` (변경 요약 에이전트)
3. `claude/agents/impact-mapper.md` (영향도 매핑 에이전트)
4. `claude/agents/nanobanana-qa-gate.md` (캐릭터 일관성 QA 게이트)

> 폴더 구조는 이미 “agents/skills/pipelines”로 쓰라고 되어 있음

### 생성 방식(반드시)

* 새 에이전트 생성은 **SkillCreator 규격**대로 MD 파일로 만든다(파일 위치/필수 필드 준수).

---

# 2) 레포에 “바로 붙여넣는” 파이프라인/에이전트 문서 원고(지시서 완성형)

아래는 **Code가 레포에 그대로 넣으면 되는 원고**예요. (구현 코드는 없음, 운영 명세만)

---

## (A) `claude/pipelines/change-intel.md` (파이프라인)

**목적:** 커밋/PR 변경사항을 “요약 + 영향도 + QA + 문서갱신 액션”으로 자동 가공

* **Trigger(실행 트리거)**

  * manual: “@change-intel 실행해줘”
  * (권장) PR 생성 시 / main merge 직후

* **Step 1: 변경사항 입력 수집**

  * 입력: `git diff 요약 / 커밋 메시지 / 변경 파일 리스트`
  * 출력: `changeset.txt`

* **Step 2: 핵심 요약 생성**

  * 호출: `@change-summarizer`
  * 출력: `reports/change-summary-YYYY-MM-DD.md`

* **Step 3: 영향도 매핑(문서/자산/브랜드 영향)**

  * 호출: `@impact-mapper`
  * 출력: `reports/impact-map-YYYY-MM-DD.json`

* **Step 4: 나노바나나 QA 게이트(캐릭터 일관성)**

  * 호출: `@nanobanana-qa-gate`
  * 출력: `reports/consistency-gate-YYYY-MM-DD.json`
  * 결과에 따라 신호등 판정

    * 🟢 자동 통과(95% 영역)
    * 🟡 검토 필요(4% 영역)
    * 🔴 개입 필요(1% 영역)

* **Step 5: 자동 문서 갱신 작업 생성**

  * 처리: impact-map을 기반으로 “수정해야 할 문서 목록 + 수정 지시” 생성
  * 출력: `reports/doc-update-actions-YYYY-MM-DD.md`

* **Step 6: 저장(SSOT)**

  * `reports/` 아래에 위 산출물 4종 저장 후 커밋

> “파이프라인을 MD로 정의해서 한 번 실행으로 전체 자동화”가 핵심 원칙으로 문서에 있음

---

## (B) `claude/agents/change-summarizer.md` (변경 요약 에이전트)

* **역할:** 변경사항을 “정보”로 가공(What/Why/Impact/Next)
* **입력:** changeset.txt
* **출력:** markdown (고정 포맷)

**출력 포맷(고정)**

* 변경 요약(3~5문장)
* 사용자 영향(UX/전환/캐릭터 일관성)
* 리스크(회귀/브랜드 흔들림/일관성)
* 롤백 포인트(돌아갈 지점)
* 다음 액션(담당/기한)

---

## (C) `claude/agents/impact-mapper.md` (영향도 매핑 에이전트)

* **역할:** 변경 파일을 보고 “어떤 문서/자산을 업데이트해야 하는지”를 자동 판정
* **입력:** 변경 파일 리스트 + change-summary
* **출력:** JSON

**룰(예시)**

* `assets/references/characters/**` 변경 → `brand/characters/**` 업데이트 필요 + QA 게이트 필수
* `prompts/nanobanana/**` 변경 → “Golden Prompt 갱신 여부” 체크
* `app/` UI 관련 변경 → 랜딩/스크린샷/스토리북 컷 영향 체크
* `pricing/checkout` 변경 → 마케팅 카피/FAQ 영향 체크

> 이런 “규칙 기반 처리”는 반복 작업을 스크립트/룰로 빼서 컨텍스트를 아끼는 방식과 정합

---

## (D) `claude/agents/nanobanana-qa-gate.md` (캐릭터 일관성 게이트)

* **역할:** 캐릭터 일관성 생명줄을 **자동 판정(신호등)**으로 강제한다.
* **입력:** 생성 결과물(이미지 링크/파일) + 캐릭터 바이블 요약
* **출력:** JSON (🟢/🟡/🔴)

### QA 체크(캐릭터 1명당 10점, 6명=60점)

* 얼굴 특징(3)
* 헤어 실루엣(2)
* 의상 디테일(2)
* 대표 색감(2)
* 체형/비율(1)

### 판정 기준

* 🟢 57/60 이상: 자동 통과(바로 사용/아카이브)
* 🟡 54~56: 리롤 1회 후 재평가
* 🔴 53 이하: 캐릭터 바이블/레퍼런스 재정비(개입)

> “95% 자동 + 4% 검토 + 1% 개입” 신호등 운영을 그대로 QA에 적용

---

# 3) “자료 모으기”를 “정보 갱신”으로 바꾸는 운영 규칙 6개

이 6개를 레포 운영 원칙으로 고정하면 Code가 업데이트를 빨리 해도 지식이 따라옵니다.

1. **변경이 생기면 문서도 자동으로 생긴다**

   * 커밋만 하지 말고 `reports/change-summary...`가 같이 생성되게 강제

2. **영향도 맵(impact-map)이 ‘작업 지시서’ 역할을 한다**

   * “어느 문서/프롬프트/바이블을 고쳐야 하는지” 자동으로 뽑히게

3. **나노바나나 관련 변경은 무조건 QA 게이트**

   * 캐릭터/프롬프트/스타일 앵커 건드리면 🟡/🔴 없이 통과 불가

4. **Golden Prompt 승격 제도**

   * 최고 결과(단체샷/웹툰컷/영상 프레임)는 `golden/`으로 승격
   * 다음 제작은 무조건 golden에서 시작(일관성 폭발)

5. **커밋/푸시 흐름은 가이드 준수**

   * pull → status → 의미있는 커밋 → push
   * (이건 이미 코미 가이드에 있음)

6. **에이전트 생성은 SkillCreator 규격으로만**

   * 파일 위치/필드(name/description/model/tools) 강제

---

# 4) 코미에게 보고(핵심 요약)

📊 **[변경사항→정보 자동가공 지시서] 보고**
📌 핵심 발견: “자료 축적”만으로는 의미 없음. **커밋/푸시 변경사항을 자동으로 요약·영향도·QA·문서갱신 액션으로 가공하는 파이프라인**을 레포에 SSOT로 고정해야 함.
🎯 액션: `change-intel` 파이프라인 + 3개 에이전트(change-summarizer/impact-mapper/nanobanana-qa-gate)를 MD로 생성하고, 결과물을 `reports/`에 자동 저장하도록 운영. 95% 자동화 신호등(🟢/🟡/🔴)을 QA 게이트에 적용.

---

원하시면, 제가 **“impact-mapper 룰(폴더별 영향도 테이블)”**을 하루하루의 기적 레포 구조 기준으로 더 촘촘하게(웹툰/스토리북/기적영상 각각) 만들어서 **문서 갱신 대상이 자동으로 더 정확히 찍히게**까지 확장해드릴게요.


루미 분석 모드 📊✨
푸르미르님, **재미가 보낸 지시서는 방향성은 아주 좋고(‘캐릭터 DNA 고정 + 멀티턴 편집 + DB 재사용’), 그대로 실행하면 70점짜리 엔진**은 바로 나올 수 있어요.
다만 **“95% 이상”을 안정적으로 찍으려면** 몇 군데를 **정확한 제품 스펙/현실 제약에 맞게 업그레이드**해야 합니다.

아래에 **강점/리스크/업그레이드 포인트** + **Code에게 다시 보내는 “v2 지시서(바로 실행형)”**까지 붙여드립니다.

---

## 📊 [검토 결과] 재미 지시서 강점

1. **목표가 명확**: “전 매체 95% 일관성”을 SLA로 박음(좋음)
2. **마스터 시트(캐릭터 시트) 개념**: 레퍼런스 고정의 정석
3. **멀티턴 편집**: Nano Banana 계열의 강점과 잘 맞음(연속 컷/의상 변경에 유리) ([구글 개발자 블로그][1])
4. **Airtable 연동**: “유저 아바타 재사용” 설계 자체가 올바름(7일 여정에 필수)

---

## ⚠️ [리스크] 지금 형태로는 95%가 흔들릴 수 있는 지점

### 1) “아이덴티티 마커를 별도 데이터로 추출”은 **표현을 현실적으로 바꿔야 함**

Nano Banana는 텍스트+이미지 기반으로 **대화형 생성/편집**이 가능하지만, “시각적 지문을 모델이 별도 데이터(예: seed처럼)로 뽑아서 강제 주입”은 **공식 스펙 표현과는 거리가 있음**. ([Google AI for Developers][2])
→ 해결: **‘마커’는 실제로는 (A) 레퍼런스 이미지 묶음 + (B) 캐릭터 DNA 텍스트 매니페스트 + (C) 스타일 앵커 1장**으로 SSOT화하는 게 안정적입니다.

### 2) “Seed 저장”은 불확실

Gemini/Nano Banana 쪽은 “seed”를 일관성 키로 쓰는 방식이 일반적이지 않거나 노출이 제한될 수 있어요(제품/플랫폼에 따라 다름).
→ 해결: Airtable에는 **Seed 대신 ‘Reference Set ID + Character DNA Manifest 버전 + Golden Prompt ID’**를 저장하도록 바꾸면 안정적입니다.

### 3) “자동 시퀀스 분할”은 공식 기능으로 단정하면 위험

지시서에 있는 “자동 시퀀스 분할 기능”은 **공식적으로 보장된 기능처럼 쓰기엔 근거가 약함**(그리고 구현 난이도도 큼).
→ 해결: “시퀀스 분할”은 **기획/프롬프트 파이프라인 기능**으로 정의하세요:
(스토리 아웃라인 6컷 생성 → 컷별 프롬프트 조립 → 레퍼런스 고정 생성) 이게 현실적인 “증폭”입니다.

### 4) 운영 리스크: 앱(Gemini)만으로는 **한도/쿼터** 문제가 생길 수 있음

공식 안내에서도 Nano Banana 접근은 **Gemini 앱/AI Studio/Vertex AI/API 등 경로가 나뉘고, 한도에 따라 모델이 자동으로 바뀌기도** 합니다. ([Gemini][3])
→ “매체 확장(웹툰/영상) + 캐릭터 일관성”은 결국 **Vertex AI 또는 Gemini API 중심 운영**이 안정적입니다. ([구글 개발자 블로그][4])

### 5) SynthID 워터마크/정책 체크

Gemini 2.5 Flash Image로 생성/편집된 이미지는 **SynthID(비가시 워터마크)**가 포함된다고 안내됩니다. ([aistudio.google.com][5])
→ 마케팅/배포 정책 문서(표기/예시/워터마크/저작권 문구)와 연결 필요.

---

# ✅ 업그레이드 제안: “자료 모음”이 아니라 **에이전트/스킬로 ‘정보 가공’되게**

재미 지시서를 **Aurora5 방식(스킬/에이전트/파이프라인)**으로 바꾸면, Code가 “바로바로 업데이트”해도 자동으로 지식이 가공됩니다.

## 핵심 구조: NanoBanana C.C.E v2 (Consistency & Content Engine)

### 에이전트 5개(고정)

1. **CharacterDNAExtractor**

* 입력: 캐릭터 마스터 시트 + 레퍼런스 3장
* 출력: `character_dna.json`(텍스트 매니페스트) + 팔레트 + 금지변형 규칙

2. **PromptAssembler**

* 입력: 씬 타입(스토리북/웹툰/영상/단체샷) + 캐릭터 DNA + 스타일 앵커
* 출력: 최종 프롬프트(버전 관리)

3. **MultiTurnEditor**

* 입력: 베이스 이미지 + 변경 요청(의상/포즈/배경)
* 출력: “캐릭터 유지” 편집 결과
  (멀티턴 편집이 일관성 유지에 유리하다는 가이드를 반영) ([구글 개발자 블로그][1])

4. **ConsistencyGate(QA)**

* 입력: 결과 이미지 + 캐릭터 DNA
* 출력: 🟢/🟡/🔴 점수 + 리롤 지시(최대 2회)

5. **GoldenPromptManager**

* 입력: 통과한 결과 + 프롬프트
* 출력: `golden/` 승격 + 다음 생성의 기본값으로 고정

---

# 💻 Code에게 다시 보내는 지시서 (v2, “정보 가공형”)

아래를 그대로 전달하시면 됩니다.

---

## 💻 [지시서 v2] NanoBanana C.C.E 구축 (자료→정보 자동가공형)

**목표:** 하루하루의 기적 전 매체(스토리북/웹툰/영상/소원그림)에서 캐릭터 일관성 **95%+**를 시스템으로 보장한다.
**핵심 원리:** “레퍼런스 이미지 묶음 + 캐릭터 DNA 텍스트 매니페스트 + 스타일 앵커”를 **SSOT로 고정**하고, 생성은 **멀티턴 편집 + QA 게이트**로 안정화한다. ([Google AI for Developers][2])

### 0) 모델/플랫폼 표준(명확히)

* **Nano Banana = Gemini 2.5 Flash Image** ([Google DeepMind][6])
* **Nano Banana Pro = Gemini 3 Pro Image** ([blog.google][7])
* 운영은 규모 커지면 **Vertex AI / Gemini API**로 안정화 ([구글 개발자 블로그][4])
* 생성물은 SynthID 포함 가능(정책/표기 문서 연동) ([aistudio.google.com][5])

### 1) 레포 SSOT 구조(필수)

* `assets/references/characters/<name>/01_front.png, 02_3quarter.png, 03_full.png`
* `brand/characters/<name>.md` (불변요소/금지변형/팔레트)
* `assets/style_anchors/miracle_watercolor_anchor.png` (1장 고정)
* `prompts/nanobanana/scene_templates/` (storybook/webtoon/video/group)
* `reports/consistency/` (QA 결과 축적)
* `golden/` (승자 프롬프트/승자 결과)

### 2) “캐릭터 DNA 매니페스트”로 마커를 현실화

* “Identity Markers”는 **seed가 아니라** 아래를 의미한다:

  * 얼굴/헤어/의상 고정 포인트(텍스트)
  * 대표 색 3개
  * 금지 변형 5개
  * 레퍼런스 이미지 세트 ID
  * 스타일 앵커 ID
* 파일: `assets/character_dna/<name>_dna.json` (버전 관리)

### 3) 생성 파이프라인(입력→처리→출력)

**Input:** (등장 캐릭터, 씬 타입, 비율, 변경사항)
**Process:**

1. PromptAssembler가 프롬프트 조립
2. Nano Banana로 **베이스 생성**
3. MultiTurnEditor로 “의상/포즈/배경” 수정(캐릭터 유지) ([구글 개발자 블로그][1])
4. ConsistencyGate 점수 산출
5. 🟡이면 리롤 1~2회, 🔴이면 레퍼런스/매니페스트 갱신
   **Output:** 이미지 + 프롬프트 + QA 리포트 자동 저장

### 4) QA 게이트(95% 운영용)

* 캐릭터당 10점, 6명 = 60점
* **🟢 57+** 즉시 통과
* **🟡 54~56** 리롤 1회 후 재평가
* **🔴 ≤53** 캐릭터 DNA/레퍼런스 재정비

### 5) Airtable 연동 설계(Seed 대신 ID)

* 유저(소원이)별 저장 필드:

  * `avatar_reference_set_id`
  * `avatar_dna_version`
  * `golden_prompt_id`
  * `last_pass_score`
* 7일 동안 같은 ID를 재사용(일관성 유지)

### 6) 증폭(스토리북/웹툰/영상) “자동화”의 현실적 정의

* “자동 시퀀스 분할”은 기능이 아니라 파이프라인:

  1. 6컷 스토리 아웃라인 생성(텍스트)
  2. 컷별 씬 템플릿 적용
  3. 동일 레퍼런스 세트로 컷 생성
  4. QA 통과 컷만 시퀀스로 묶어 저장

### DoD(완료 기준)

* [ ] 재미 캐릭터 Master Sheet + 레퍼런스 3장 SSOT 저장
* [ ] Character DNA 매니페스트 생성/버전 관리
* [ ] 스토리북/웹툰/영상/단체샷 템플릿 4종 저장
* [ ] QA Gate 리포트가 reports에 자동 축적
* [ ] Golden Prompt 3개(단체샷/웹툰1컷/영상프레임1컷) 승격

---

## 🎯 루미가 보는 “업그레이드 핵심 3줄”

1. **‘마커/시드’ 같은 불확실 개념을** → “레퍼런스 세트 + DNA 매니페스트 + 스타일 앵커”로 **현실화/SSOT화**
2. 95%는 **단발 생성**이 아니라 **멀티턴 편집 + QA 게이트(리롤 1~2회)**로 보장 ([구글 개발자 블로그][1])
3. 자료 저장이 끝이 아니라, **에이전트가 변경사항을 ‘정보(요약/영향/QA/승격)’로 가공**하게 만든다

---

## 📌 코미에게 공유용 요약

📊 **[재미 지시서 검토] 보고**
📌 핵심 발견: 방향은 매우 좋지만, “Identity Marker/Seed/자동 시퀀스 분할”은 스펙/운영 현실과 다를 수 있어 **SSOT(레퍼런스 세트+DNA 매니페스트+스타일 앵커) + 멀티턴 편집 + QA 게이트**로 재정의해야 95%가 안정적으로 나온다. ([Google AI for Developers][2])
🎯 액션: Code에게 v2 지시서로 교체 전달, Airtable은 seed 대신 reference_set_id/dna_version/golden_prompt_id 저장, Golden Prompt 승격제 도입.

---

푸르미르님, 다음 스텝으로 제가 **“캐릭터 DNA 매니페스트 템플릿(항목/예시)”**을 재미 캐릭터 기준으로 한 장 만들어드리면, Code가 즉시 SSOT를 만들고 QA 게이트까지 연결하기가 훨씬 빨라져요.

[1]: https://developers.googleblog.com/en/how-to-prompt-gemini-2-5-flash-image-generation-for-the-best-results/?utm_source=chatgpt.com "How to prompt Gemini 2.5 Flash Image Generation ..."
[2]: https://ai.google.dev/gemini-api/docs/image-generation?utm_source=chatgpt.com "Nano Banana image generation | Gemini API"
[3]: https://gemini.google/kr/overview/image-generation/?hl=ko-KR&utm_source=chatgpt.com "Nano Banana Pro - Gemini AI 이미지 생성기 및 사진 편집기"
[4]: https://developers.googleblog.com/ko/introducing-gemini-2-5-flash-image/?utm_source=chatgpt.com "최첨단 이미지 모델 Gemini 2.5 Flash Image 출시"
[5]: https://aistudio.google.com/models/gemini-2-5-flash-image?utm_source=chatgpt.com "Gemini 2.5 Flash Image (Nano Banana)"
[6]: https://deepmind.google/models/gemini-image/flash/?utm_source=chatgpt.com "Gemini 2.5 Flash Image (Nano Banana)"
[7]: https://blog.google/innovation-and-ai/products/nano-banana-pro/?utm_source=chatgpt.com "Introducing Nano Banana Pro"

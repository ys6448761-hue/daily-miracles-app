# 🚀 Claude Code 작업 지침서 v3.0
## 안티그래비티 방식 적용 - "하루하루의 기적"

> **Version:** 3.0.0  
> **Updated:** 2025-01-11  
> **적용:** 안티그래비티(Antigravity) 워크플로우 통합  
> **Owner:** 푸르미르 (CEO)  
> **Operator:** 코미 (Chief Operating AI Manager)

---

## ⚡ 핵심 철칙

> **시간 제약 없음. 정확하면서도 빠르게.**  
> **완료되면 즉시 보고. 정확한 정보가 최우선.**

---

## 🆕 v3.0 업데이트: 안티그래비티 방식 적용

### 안티그래비티란?
구글의 Gemini 3 기반 코딩 에이전트로, 체계적인 계획 수립과 결과 보고 시스템이 특징입니다.

### 우리가 적용하는 핵심 3가지

| 안티그래비티 | Claude Code 적용 |
|-------------|-----------------|
| Task.md 생성 | 작업 시작 전 Task 문서 작성 |
| Plan.md 생성 | 상세 구현 계획서 작성 |
| Walkthrough.md | 작업 완료 후 결과 보고서 작성 |
| browser_sub_agent | 자동 테스트 스크립트 실행 |

---

## 📋 NEW! 작업 플로우 (필수)

### 🟢 Phase 1: 작업 시작 전 (필수!)

#### Step 1: AURORA_STATUS.md 확인
```bash
# 현재 프로젝트 상태 파악
cat AURORA_STATUS.md
```

#### Step 2: Task.md 작성 (할 일 목록)
```markdown
# 📋 Task.md - [작업명]
**생성일**: YYYY-MM-DD
**담당**: Claude Code
**검수**: 코미

---

## ✅ 할 일 목록

### Priority 1 (핵심)
- [ ] Task 1: [구체적인 작업명]
- [ ] Task 2: [구체적인 작업명]
- [ ] Task 3: [구체적인 작업명]

### Priority 2 (중요)
- [ ] Task 4: [구체적인 작업명]
- [ ] Task 5: [구체적인 작업명]

### Priority 3 (최적화)
- [ ] Task 6: [구체적인 작업명]

---

## 📊 진행 상태
- 🔴 시작 전
- 🟡 진행 중
- 🟢 완료

**현재 상태**: 🔴 시작 전
```

#### Step 3: Plan.md 작성 (상세 구현 계획)
```markdown
# 📐 Plan.md - [작업명] 구현 계획

---

## 🎯 목표
[이 작업의 최종 목표]

---

## 🏗️ 아키텍처 변경사항
```
[변경 전]
├─ 기존 구조

[변경 후]
├─ 새로운 구조
```

---

## 💻 기술 스펙

### 사용 기술
- 언어: [JavaScript/Python/etc]
- 프레임워크: [Node.js/React/etc]
- 라이브러리: [추가 라이브러리]

### 성능 목표
- 응답 시간: [X초 이내]
- 메모리: [제한]
- 에러율: [0.1% 이하]

---

## 📂 변경 파일 목록
1. `path/to/file1.js` - [변경 내용]
2. `path/to/file2.js` - [변경 내용]
3. `path/to/file3.js` - [신규 생성]

---

## 🧪 테스트 계획
1. 유닛 테스트: [테스트 항목]
2. 통합 테스트: [테스트 항목]
3. E2E 테스트: [테스트 항목]

---

## ⚠️ 리스크 & 대안
| 리스크 | 확률 | 대안 |
|--------|------|------|
| [리스크1] | 낮음 | [대안] |
| [리스크2] | 중간 | [대안] |

---

## ✅ 푸르미르님 승인 필요 사항
- [ ] 아키텍처 변경 승인
- [ ] 기술 스택 선택 확인
- [ ] 기타 결정 사항
```

#### Step 4: 푸르미르님 검토 대기
```
코미: "Plan.md 작성 완료했습니다. 검토 부탁드립니다."
푸르미르: "승인" 또는 "수정 필요: [내용]"
```

---

### 🟡 Phase 2: 작업 진행 중

#### 실시간 Task.md 업데이트
```markdown
### Priority 1 (핵심)
- [x] Task 1: HTML 폼 확장 ✅ 완료
- [🔄] Task 2: 분석 엔진 업그레이드 ← 현재 진행 중
- [ ] Task 3: API 연동

**현재 상태**: 🟡 진행 중 (2/6 완료)
```

#### 이슈 발생 시 즉시 기록
```markdown
## 🚨 이슈 로그
| 시간 | 이슈 | 상태 | 해결책 |
|------|------|------|--------|
| 14:30 | API 응답 지연 | 해결됨 | 캐싱 적용 |
| 15:00 | DB 연결 오류 | 진행 중 | 재연결 시도 중 |
```

---

### 🟢 Phase 3: 작업 완료 후 (필수!)

#### Walkthrough.md 결과 보고서 작성
```markdown
# 📊 Walkthrough.md - [작업명] 결과 보고서
**완료일**: YYYY-MM-DD
**작업자**: Claude Code
**검수자**: 코미

---

## ✅ 완료 항목 요약

### 수행한 작업
1. ✓ [Task 1 내용] - 완료
2. ✓ [Task 2 내용] - 완료
3. ✓ [Task 3 내용] - 완료

### 미완료 항목 (있는 경우)
- [ ] [미완료 항목] - 사유: [이유]

---

## 📂 변경된 파일 목록

| 파일 경로 | 변경 유형 | 설명 |
|-----------|----------|------|
| `/backend/api/analysis.js` | 수정 | 관계 분석 로직 추가 |
| `/frontend/components/Form.jsx` | 수정 | Q6-Q12 추가 |
| `/backend/utils/compatibility.js` | 신규 | 궁합 계산 유틸리티 |

---

## 🧪 테스트 결과

### 자동 테스트
```
✅ Unit Tests: 45/45 passed
✅ Integration Tests: 12/12 passed
✅ E2E Tests: 8/8 passed
```

### 수동 테스트 (스크린샷)
| 테스트 항목 | 결과 | 비고 |
|------------|------|------|
| 모바일 폼 입력 | ✅ Pass | 정상 작동 |
| 결과 페이지 렌더링 | ✅ Pass | 1.2초 로딩 |
| PDF 다운로드 | ✅ Pass | 정상 생성 |

---

## 📈 성능 측정

| 지표 | 목표 | 결과 | 상태 |
|------|------|------|------|
| 응답 시간 | 2초 | 1.5초 | ✅ 달성 |
| 메모리 사용 | 512MB | 380MB | ✅ 달성 |
| 에러율 | 0.1% | 0.02% | ✅ 달성 |

---

## 🐛 발견된 이슈 & 해결

| 이슈 | 원인 | 해결책 | 상태 |
|------|------|--------|------|
| 폼 검증 누락 | 조건부 로직 버그 | if문 수정 | ✅ 해결 |
| 느린 쿼리 | 인덱스 미설정 | DB 인덱스 추가 | ✅ 해결 |

---

## 🔮 다음 단계 권장

### 즉시 필요
1. [ ] 베타 테스트 시작
2. [ ] 사용자 피드백 수집

### 추후 개선
1. [ ] 성능 추가 최적화
2. [ ] 에러 모니터링 강화

---

## 📎 첨부

### 스크린샷
- [폼 입력 화면]
- [결과 페이지]
- [PDF 미리보기]

### 로그
- [테스트 로그 파일 경로]
- [배포 로그 파일 경로]

---

**🎯 최종 상태: ✅ 완료**

검수 요청: @코미
```

---

## 🧪 NEW! 자동 테스트 가이드라인

### 배포 전 필수 테스트 스크립트

```javascript
// tests/e2e/workflow-test.js

const { chromium } = require('playwright');

async function runE2ETest() {
  const browser = await chromium.launch();
  const page = await browser.newPage();
  
  console.log('🧪 E2E 테스트 시작...');
  
  // 1. 메인 페이지 로딩
  await page.goto('https://daily-miracles-app.onrender.com');
  await page.screenshot({ path: 'screenshots/01-main.png' });
  console.log('✅ Step 1: 메인 페이지 로딩 완료');
  
  // 2. 폼 입력 테스트
  await page.fill('#name', '테스트 사용자');
  await page.fill('#birthdate', '1990-01-01');
  // ... 나머지 필드
  await page.screenshot({ path: 'screenshots/02-form.png' });
  console.log('✅ Step 2: 폼 입력 완료');
  
  // 3. 제출 및 결과 확인
  await page.click('#submit-btn');
  await page.waitForSelector('.result-page');
  await page.screenshot({ path: 'screenshots/03-result.png' });
  console.log('✅ Step 3: 결과 페이지 로딩 완료');
  
  // 4. PDF 다운로드 확인
  const [download] = await Promise.all([
    page.waitForEvent('download'),
    page.click('#download-pdf')
  ]);
  console.log('✅ Step 4: PDF 다운로드 완료');
  
  await browser.close();
  
  console.log('\n🎉 모든 E2E 테스트 통과!');
  return { success: true, screenshots: ['01-main.png', '02-form.png', '03-result.png'] };
}

runE2ETest().catch(console.error);
```

### 테스트 실행 명령어
```bash
# 테스트 실행
npm run test:e2e

# 스크린샷 확인
ls -la screenshots/

# 결과 보고
cat test-results.json
```

---

## 📋 표준 작업 템플릿

### 신규 기능 개발
```markdown
## 🆕 [기능명] 개발

### Phase 1: 계획
- [ ] AURORA_STATUS.md 확인
- [ ] Task.md 작성
- [ ] Plan.md 작성
- [ ] 푸르미르님 승인

### Phase 2: 개발
- [ ] 코드 작성
- [ ] 단위 테스트
- [ ] Task.md 실시간 업데이트

### Phase 3: 완료
- [ ] 통합 테스트
- [ ] E2E 테스트
- [ ] Walkthrough.md 작성
- [ ] 코미 검수 요청
```

### 버그 수정
```markdown
## 🐛 [버그명] 수정

### Phase 1: 분석
- [ ] 버그 재현
- [ ] 원인 파악
- [ ] Task.md 작성 (간소화)

### Phase 2: 수정
- [ ] 코드 수정
- [ ] 테스트

### Phase 3: 완료
- [ ] Walkthrough.md 작성 (간소화)
- [ ] 배포
```

---

## 🔄 코미 ↔ Claude Code 역할 분담

### 🤖 코미 담당 (기획/관리)
```
✅ Task.md 검토 & 승인
✅ Plan.md 검토 & 승인
✅ Walkthrough.md 검수
✅ 푸르미르님 보고
✅ 우선순위 조정
✅ 이슈 에스컬레이션
```

### 💻 Claude Code 담당 (기술/실행)
```
✅ Task.md 작성
✅ Plan.md 작성
✅ 코드 구현
✅ 테스트 실행
✅ Walkthrough.md 작성
✅ 배포
```

---

## 📊 보고 규칙

### 작업 시작 시
```
Claude Code → 코미:
"📋 [작업명] Task.md & Plan.md 작성 완료
검토 부탁드립니다."
```

### Priority 완료 시
```
Claude Code → 코미:
"✅ Priority 1 완료
- Task 1: ✓ [내용]
- Task 2: ✓ [내용]
- Task 3: ✓ [내용]

🧪 테스트: 모두 통과
🚨 블로커: 없음

📋 Priority 2 진행 중..."
```

### 전체 완료 시
```
Claude Code → 코미:
"📊 [작업명] Walkthrough.md 작성 완료
검수 부탁드립니다.

핵심 결과:
- 변경 파일: X개
- 테스트: 전체 통과
- 성능: 목표 달성

다음 작업 대기 중입니다."
```

---

## 🚨 이슈 처리 절차

### Level 1: 경미한 이슈 (자체 해결)
```
- 코드 오타
- 스타일 수정
- 사소한 버그
→ 자체 해결 후 Walkthrough.md에 기록
```

### Level 2: 중요 이슈 (코미 보고)
```
- 아키텍처 변경 필요
- 성능 목표 미달
- 예상치 못한 기술적 제약
→ 코미에게 보고, 대안 제시
```

### Level 3: 긴급 이슈 (즉시 에스컬레이션)
```
- 서비스 중단
- 데이터 손실 위험
- 보안 이슈
→ 즉시 코미 + 푸르미르님 보고
```

---

## ✅ 체크리스트

### 작업 시작 전
- [ ] AURORA_STATUS.md 확인
- [ ] Task.md 작성
- [ ] Plan.md 작성
- [ ] 푸르미르님 승인 확인

### 작업 중
- [ ] Task.md 실시간 업데이트
- [ ] 이슈 발생 시 즉시 기록
- [ ] Priority별 보고

### 작업 완료 후
- [ ] 모든 테스트 통과 확인
- [ ] Walkthrough.md 작성
- [ ] 스크린샷/로그 첨부
- [ ] 코미 검수 요청

---

## 💡 팁: 효율적인 워크플로우

### DO ✅
```
✅ Task.md는 간결하게 (할 일 목록 중심)
✅ Plan.md는 상세하게 (기술 결정 포함)
✅ Walkthrough.md는 증거 중심 (스크린샷, 로그)
✅ 이슈는 발생 즉시 기록
✅ Priority 완료마다 보고
```

### DON'T ❌
```
❌ 계획 없이 바로 코딩 시작
❌ 완료 후 보고서 생략
❌ 테스트 없이 배포
❌ 이슈 숨기기
❌ 너무 긴 Plan.md (실행 가능해야 함)
```

---

## 🎯 최종 목표

> **"모든 작업을 투명하게, 체계적으로, 추적 가능하게"**

### 기대 효과
- ✅ 작업 방향 사전 확인 → 재작업 감소
- ✅ 결과 문서화 → 히스토리 추적 가능
- ✅ 자동 테스트 → 버그 조기 발견
- ✅ 체계적 보고 → 커뮤니케이션 효율 ↑

---

**📅 마지막 업데이트:** 2025-01-11  
**📝 다음 리뷰:** 베타 테스트 완료 후  
**👤 관리자:** 코미 (총괄 AI 매니저)

---

🚀 **정확하면서도 빠르게! 투명하게! 체계적으로!**
/**
 * ═══════════════════════════════════════════════════════════════════════════
 * 여수 소원항해 견적 시스템 v2.0 - 가격표 데이터
 * ═══════════════════════════════════════════════════════════════════════════
 *
 * 설계 원칙:
 *   1. 지역 확장 대비 (yeosu → 전국)
 *   2. 가격 버전 관리 (draft/active)
 *   3. 운영비/여행사차지 분리
 *   4. 바우처 모드 지원 (split/flex/hybrid)
 *   5. 혜택은 display용으로만 (가격 차감 X)
 *
 * 작성일: 2026-01-04
 * 설계: 루미 / 코미
 * 승인: 푸르미르 CEO
 * ═══════════════════════════════════════════════════════════════════════════
 */

module.exports = {
  // ═══════════════════════════════════════════════════════════════════════════
  // 메타 정보
  // ═══════════════════════════════════════════════════════════════════════════
  meta: {
    schemaVersion: "1.0.0",
    priceVersion: "v1.1",  // 가격/정책 패치 버전
    defaultRegion: "yeosu",
    currency: "KRW",
    lastUpdated: "2026-01-04",
    updatedBy: "푸르미르 CEO 확정"
  },

  // ═══════════════════════════════════════════════════════════════════════════
  // 바우처 프리셋
  // ═══════════════════════════════════════════════════════════════════════════
  voucherPresets: {
    split_10_5_5: { food: 10000, experience: 5000, localGoods: 5000 },
    split_15_5_0: { food: 15000, experience: 5000, localGoods: 0 }
  },

  // ═══════════════════════════════════════════════════════════════════════════
  // 공휴일 목록 (전국 공통)
  // ═══════════════════════════════════════════════════════════════════════════
  holidays: [
    '2026-01-01',  // 신정
    '2026-01-28', '2026-01-29', '2026-01-30',  // 설날
    '2026-03-01',  // 삼일절
    '2026-05-05',  // 어린이날
    '2026-05-24',  // 석가탄신일
    '2026-06-06',  // 현충일
    '2026-08-15',  // 광복절
    '2026-09-26', '2026-09-27', '2026-09-28',  // 추석
    '2026-10-03',  // 개천절
    '2026-10-09',  // 한글날
    '2026-12-25'   // 성탄절
  ],

  // ═══════════════════════════════════════════════════════════════════════════
  // 정책 (전역)
  // ═══════════════════════════════════════════════════════════════════════════
  policies: {
    quoteValidDays: 7,
    leadScore: {
      hot: 60,   // 즉시 연락
      warm: 40   // 10분 내 연락
    },
    groupThreshold: 5  // 5인 이상 = 단체
  },

  // ═══════════════════════════════════════════════════════════════════════════
  // 지역별 설정
  // ═══════════════════════════════════════════════════════════════════════════
  regions: {
    // ─────────────────────────────────────────────────────────────────────────
    // 여수
    // ─────────────────────────────────────────────────────────────────────────
    yeosu: {
      name: "여수",
      dayTypes: ["sun", "mon-thu", "fri", "sat", "holiday"],

      // ═══════════════════════════════════════════════════════════════════════
      // 운영비 / 여행사 차지 (분리!)
      // ═══════════════════════════════════════════════════════════════════════
      fees: {
        // 우리 운영/진행비 (플래너 비용)
        operation_fee_per_person: 20000,

        // 여행사 인계/대행 성격일 때만 (B2B용, 기본 미사용)
        agency_charge_per_person: 30000,

        // 단체 할인 규칙
        group_discount_rules: [
          { min: 9, max: 12, operation_fee_per_person: 18000, note: "인센티브" },
          { min: 13, max: null, operation_fee_per_person: null, note: "협의" }
        ]
      },

      // ═══════════════════════════════════════════════════════════════════════
      // 바우처 설정
      // ═══════════════════════════════════════════════════════════════════════
      voucher: {
        defaultMode: "hybrid",  // split | flex | hybrid
        split: { food: 10000, experience: 5000, localGoods: 5000 },
        flex: { amount: 0 },    // v1에서는 0으로 두고 필요 시 켜기
        validityDaysAfterCheckout: 3
      },

      // ═══════════════════════════════════════════════════════════════════════
      // 호텔 가격표
      // ═══════════════════════════════════════════════════════════════════════
      hotels: {
        // 케니 호텔 (2~3인만!)
        kenny: {
          name: "케니 호텔",
          policy: { minGuests: 2, maxGuests: 3 },
          roomTypes: {
            2: "오션디럭스 더블",
            3: "오션패밀리 트윈"
          },
          // dayType -> guestCount -> { cost, sell, list }
          pricing: {
            "sun": {
              2: { cost: 40000, sell: 50000, list: 65000 },
              3: { cost: 65000, sell: 80000, list: 100000 }
            },
            "mon-thu": {
              2: { cost: 40000, sell: 50000, list: 65000 },
              3: { cost: 65000, sell: 80000, list: 100000 }
            },
            "fri": {
              2: { cost: 55000, sell: 70000, list: 90000 },
              3: { cost: 100000, sell: 120000, list: 150000 }
            },
            "sat": {
              2: { cost: 55000, sell: 70000, list: 90000 },
              3: { cost: 100000, sell: 120000, list: 150000 }
            },
            "holiday": {
              2: { cost: 85000, sell: 100000, list: 130000 },
              3: { cost: 140000, sell: 170000, list: 210000 }
            }
          }
        },

        // 유탑마리나 호텔
        utop: {
          name: "유탑마리나 호텔",
          policy: { minGuests: 2, maxGuests: 4 },
          roomTypes: {
            2: "오션디럭스 더블",
            3: "오션패밀리 트윈",
            4: "오션패밀리 트윈"
          },
          pricing: {
            "sun": {
              2: { cost: 60000, sell: 75000, list: 95000 },
              3: { cost: 70000, sell: 85000, list: 105000 },
              4: { cost: 70000, sell: 85000, list: 105000 }
            },
            "mon-thu": {
              2: { cost: 60000, sell: 75000, list: 95000 },
              3: { cost: 70000, sell: 85000, list: 105000 },
              4: { cost: 70000, sell: 85000, list: 105000 }
            },
            "fri": {
              2: { cost: 110000, sell: 135000, list: 165000 },
              3: { cost: 90000, sell: 110000, list: 135000 },
              4: { cost: 90000, sell: 110000, list: 135000 }
            },
            "sat": {
              2: { cost: 145000, sell: 175000, list: 210000 },
              3: { cost: 150000, sell: 180000, list: 220000 },
              4: { cost: 150000, sell: 180000, list: 220000 }
            },
            "holiday": {
              2: { cost: 145000, sell: 175000, list: 210000 },
              3: { cost: 150000, sell: 180000, list: 220000 },
              4: { cost: 150000, sell: 180000, list: 220000 }
            }
          }
        },

        // 라마다 호텔
        ramada: {
          name: "라마다 호텔",
          policy: { minGuests: 2, maxGuests: 4 },
          roomTypes: {
            2: "오션디럭스 더블",
            3: "오션패밀리 트윈",
            4: "오션패밀리 트윈"
          },
          pricing: {
            "sun": {
              2: { cost: 55000, sell: 70000, list: 90000 },
              3: { cost: 65000, sell: 80000, list: 100000 },
              4: { cost: 65000, sell: 80000, list: 100000 }
            },
            "mon-thu": {
              2: { cost: 55000, sell: 70000, list: 90000 },
              3: { cost: 65000, sell: 80000, list: 100000 },
              4: { cost: 65000, sell: 80000, list: 100000 }
            },
            "fri": {
              2: { cost: 75000, sell: 90000, list: 115000 },
              3: { cost: 85000, sell: 100000, list: 125000 },
              4: { cost: 85000, sell: 100000, list: 125000 }
            },
            "sat": {
              2: { cost: 115000, sell: 140000, list: 175000 },
              3: { cost: 125000, sell: 150000, list: 190000 },
              4: { cost: 125000, sell: 150000, list: 190000 }
            },
            "holiday": {
              2: { cost: 170000, sell: 200000, list: 250000 },
              3: { cost: 180000, sell: 210000, list: 260000 },
              4: { cost: 180000, sell: 210000, list: 260000 }
            }
          }
        },

        // 오동재 호텔
        odongjae: {
          name: "오동재 호텔",
          policy: { minGuests: 2, maxGuests: 4 },
          roomTypes: {
            2: "오션디럭스 더블",
            3: "오션패밀리 트윈",
            4: "오션패밀리 트윈"
          },
          pricing: {
            "sun": {
              2: { cost: 65000, sell: 80000, list: 100000 },
              3: { cost: 75000, sell: 90000, list: 115000 },
              4: { cost: 85000, sell: 100000, list: 125000 }
            },
            "mon-thu": {
              2: { cost: 65000, sell: 80000, list: 100000 },
              3: { cost: 75000, sell: 90000, list: 115000 },
              4: { cost: 85000, sell: 100000, list: 125000 }
            },
            "fri": {
              2: { cost: 90000, sell: 110000, list: 140000 },
              3: { cost: 100000, sell: 120000, list: 150000 },
              4: { cost: 110000, sell: 130000, list: 165000 }
            },
            "sat": {
              2: { cost: 90000, sell: 110000, list: 140000 },
              3: { cost: 100000, sell: 120000, list: 150000 },
              4: { cost: 110000, sell: 130000, list: 165000 }
            },
            "holiday": {
              2: { cost: 175000, sell: 210000, list: 260000 },
              3: { cost: 185000, sell: 220000, list: 275000 },
              4: { cost: 195000, sell: 230000, list: 290000 }
            }
          }
        }
      },

      // ═══════════════════════════════════════════════════════════════════════
      // 레저 가격표 (1인당) - v1.1 패치 (2026-01-04)
      // ═══════════════════════════════════════════════════════════════════════
      leisure: {
        cable: {
          name: "케이블카",
          costChannel: "paper",  // 지류권 기본 (추후 mobile/center 확장 가능)
          // weekday: 월~목, weekend: 금~일+공휴일
          weekday: { cost: 15000, sell: 16000, list: 20000 },
          weekend: { cost: 15000, sell: 16000, list: 20000 }
        },
        aqua: {
          name: "아쿠아플라넷",
          weekday: { cost: 25000, sell: 32000, list: 40000 },
          weekend: { cost: 25000, sell: 32000, list: 40000 }
        },
        cruise: {
          name: "유람선",
          variant: "weekday_or_fireworks",  // 주말=불꽃 시즌
          weekday: { cost: 8000, sell: 13000, list: 19800 },
          weekend: { cost: 28000, sell: 35000, list: 45000 }  // weekend_fireworks
        },
        yacht: {
          name: "요트",
          variant: "weekday_or_fireworks",  // 주말=불꽃 시즌
          weekday: { cost: 25000, sell: 35000, list: 40000 },
          weekend: { cost: 50000, sell: 55000, list: 60000 }  // weekend_fireworks
        }
      },

      // ═══════════════════════════════════════════════════════════════════════
      // 소원항해단 가격 (버전 관리!)
      // ═══════════════════════════════════════════════════════════════════════
      wishVoyage: {
        versions: [
          {
            price_version: "v1.1_active",  // v1.1 패치 (2026-01-04)
            status: "active",
            effective_from: "2026-01-04",
            items: {
              basic: { cost: 25000, sell: 34900, list: 34900 },
              online: { cost: 18000, sell: 24900, list: 24900 },  // 소원의 씨앗 구매자
              experience: {
                cost: 22000,  // vendor 2k + travelAgency 5k + writer 10k + materials 5k
                sell: 35000,
                list: 39900,
                costBreakdown: {
                  vendor: 2000,
                  travelAgency: 5000,
                  writer: 10000,
                  materials: 5000
                }
              }
            },
            // [정책 P0] 장소 정책
            locationPolicy: {
              // 주말/공휴일 (금/토/일/공휴): gallery_or_mongdol 필수 (ship 금지)
              weekend: "gallery_or_mongdol",
              // 평일 (월~목): ship_or_gallery 허용 (운영 판단)
              weekday: "ship_or_gallery"
            }
          },
          {
            price_version: "v2_draft",
            status: "draft",
            effective_from: null,
            items: {
              light: { cost: 14000, sell: 19000, list: 25000 },       // TBD
              premium_photo_video: null  // TBD - 촬영 패키지
            }
          }
        ]
      },

      // ═══════════════════════════════════════════════════════════════════════
      // 무료 혜택 (display용, 가격 차감 X)
      // ═══════════════════════════════════════════════════════════════════════
      benefits: [
        {
          key: "yeosu_3combo",
          label: "여수3합 패스",
          type: "display",
          value: 15000,
          condition: "always",  // 모든 고객
          items: [
            "제휴맛집 음료 1병 (테이블당)",
            "제휴카페 아메리카노 1인"
          ],
          displayText: "15,000원 가치 무료!"
        },
        {
          key: "moonlight_benefit",
          label: "달빛혜택",
          type: "display",
          value: 6000,
          condition: "hasWishVoyage",  // 소원항해단 구매 시
          items: [
            "오락실 2,000원 현금",
            "분식집 음료 1병",
            "풍선터트리기 2,000원 할인",
            "노래방 20% 할인"
          ],
          displayText: "달빛혜택 자동 적용!"
        }
      ]
    }

    // ─────────────────────────────────────────────────────────────────────────
    // 추후 확장: 제주, 부산 등
    // ─────────────────────────────────────────────────────────────────────────
    // jeju: { ... },
    // busan: { ... }
  }
};

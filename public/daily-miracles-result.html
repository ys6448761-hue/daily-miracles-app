<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‹¹ì‹ ì˜ ê¸°ì  ì§€ìˆ˜ - í•˜ë£¨í•˜ë£¨ì˜ ê¸°ì </title>
    <meta property="og:title" content="í•˜ë£¨í•˜ë£¨ì˜ ê¸°ì " />
    <meta property="og:description" content="12ë¬¸í•­ìœ¼ë¡œ ê¸°ì ì§€ìˆ˜ì™€ 30ì¼ ë¡œë“œë§µì„ ë°›ì•„ë³´ì„¸ìš”." />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* íˆì–´ë¡œ ì„¹ì…˜ - ê¸°ì ì§€ìˆ˜ ëŒ€ì‹œë³´ë“œ */
        .hero-section {
            background: white;
            border-radius: 24px;
            padding: 60px 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 200px;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            z-index: 0;
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .user-greeting {
            font-size: 32px;
            font-weight: 700;
            color: #333;
            margin-bottom: 16px;
        }

        .user-greeting .name {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .miracle-index-display {
            margin: 40px 0;
        }

        .index-circle {
            width: 220px;
            height: 220px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0 auto 24px;
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.4);
            animation: pulse 2s infinite;
            position: relative;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        .index-circle::after {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 3px solid rgba(255, 255, 255, 0.3);
        }

        .index-number {
            font-size: 72px;
            font-weight: 800;
            color: white;
            line-height: 1;
            position: relative;
            z-index: 1;
        }

        .index-label {
            font-size: 18px;
            color: rgba(255, 255, 255, 0.9);
            margin-top: 8px;
            position: relative;
            z-index: 1;
        }

        .index-description {
            font-size: 20px;
            color: #666;
            line-height: 1.6;
            max-width: 600px;
            margin: 0 auto;
        }

        /* 5ê°€ì§€ ìš´ëª… ì˜ˆì¸¡ */
        .destiny-section {
            background: white;
            border-radius: 24px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .section-title {
            font-size: 28px;
            font-weight: 700;
            color: #333;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section-icon {
            font-size: 36px;
        }

        .destiny-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .destiny-card {
            background: linear-gradient(135deg, #f8f9ff 0%, #fff5f7 100%);
            border-radius: 16px;
            padding: 24px;
            border-left: 5px solid #667eea;
            transition: all 0.3s ease;
        }

        .destiny-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .destiny-card .icon {
            font-size: 32px;
            margin-bottom: 12px;
        }

        .destiny-card h3 {
            font-size: 20px;
            color: #667eea;
            margin-bottom: 12px;
        }

        .destiny-card p {
            color: #666;
            line-height: 1.6;
            font-size: 15px;
        }

        /* 30ì¼ ë¡œë“œë§µ */
        .roadmap-section {
            background: white;
            border-radius: 24px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .timeline {
            position: relative;
            padding-left: 40px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(to bottom, #667eea, #764ba2);
        }

        .timeline-week {
            position: relative;
            margin-bottom: 32px;
        }

        .timeline-week::before {
            content: '';
            position: absolute;
            left: -32px;
            top: 8px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            border: 4px solid white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3);
        }

        .week-number {
            font-size: 14px;
            font-weight: 600;
            color: #667eea;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .week-title {
            font-size: 22px;
            font-weight: 700;
            color: #333;
            margin-bottom: 12px;
        }

        .week-description {
            color: #666;
            line-height: 1.6;
            margin-bottom: 12px;
        }

        .week-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
        }

        .action-tag {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
        }

        /* ê´€ê³„ ë¶„ì„ */
        .relationship-section {
            background: white;
            border-radius: 24px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .relationship-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 24px;
        }

        .person-card {
            background: linear-gradient(135deg, #f8f9ff 0%, #fff5f7 100%);
            border-radius: 16px;
            padding: 24px;
            text-align: center;
        }

        .person-name {
            font-size: 24px;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 8px;
        }

        .person-type {
            font-size: 14px;
            color: #999;
            margin-bottom: 16px;
        }

        .compatibility-bar {
            height: 12px;
            background: #e5e7eb;
            border-radius: 6px;
            overflow: hidden;
            margin: 16px 0;
        }

        .compatibility-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 1s ease;
        }

        /* ì•¡ì…˜ ë²„íŠ¼ */
        .action-buttons {
            display: flex;
            gap: 16px;
            margin-top: 40px;
            justify-content: center;
        }

        .btn {
            padding: 16px 32px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn-secondary:hover {
            background: #f8f9ff;
        }

        /* ë¡œë”© ìƒíƒœ */
        .loading {
            text-align: center;
            padding: 60px 20px;
            color: white;
        }

        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .hero-section {
                padding: 40px 24px;
            }

            .user-greeting {
                font-size: 24px;
            }

            .index-circle {
                width: 180px;
                height: 180px;
            }

            .index-number {
                font-size: 56px;
            }

            .destiny-grid {
                grid-template-columns: 1fr;
            }

            .relationship-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .action-buttons {
                flex-direction: column;
            }
        }

        /* í”„ë¦°íŠ¸ìš© ìŠ¤íƒ€ì¼ */
        @media print {
            body {
                background: white;
                padding: 0;
            }

            .action-buttons, .no-print {
                display: none !important;
            }

            .hero-section, .destiny-section, .roadmap-section, .relationship-section {
                box-shadow: none;
                break-inside: avoid;
                page-break-inside: avoid;
            }

            .container {
                max-width: 100%;
            }
        }

        /* í‘¸í„° */
        .footer {
            background: white;
            border-radius: 24px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            text-align: center;
        }

        .footer-links {
            margin-bottom: 20px;
        }

        .footer-links a {
            color: #667eea;
            text-decoration: none;
            margin: 0 12px;
            font-size: 14px;
        }

        .footer-links a:hover {
            text-decoration: underline;
        }

        .business-info {
            font-size: 12px;
            color: #6c757d;
            line-height: 1.8;
        }

        .business-info .line {
            margin: 3px 0;
        }

        .business-info .separator {
            margin: 0 8px;
            color: #dee2e6;
        }

        @media (max-width: 768px) {
            .footer-links a {
                display: block;
                margin: 8px 0;
            }

            .business-info .separator {
                display: none;
            }

            .business-info .line {
                display: block;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="loading" class="loading">
            <div class="spinner"></div>
            <p>ë‹¹ì‹ ì˜ ê¸°ì ì„ ì¤€ë¹„í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
        </div>

        <div id="content" style="display: none;">
            <!-- íˆì–´ë¡œ ì„¹ì…˜ - ê¸°ì ì§€ìˆ˜ -->
            <div class="hero-section">
                <div class="hero-content">
                    <h1 class="user-greeting"><span class="name" id="userName">ì‚¬ìš©ì</span>ë‹˜ì˜ ê¸°ì  ì§€ìˆ˜</h1>

                    <div class="miracle-index-display">
                        <div class="index-circle">
                            <div class="index-number" id="miracleIndex">75</div>
                            <div class="index-label">MIRACLE INDEX</div>
                        </div>
                        <p class="index-description" id="indexDescription">
                            ë‹¹ì‹ ì˜ ê¸°ì ì€ ì´ë¯¸ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ë†’ì€ ë³€í™” ê°€ëŠ¥ì„±ê³¼ ê°•í•œ ì˜ì§€ê°€ ë³´ì…ë‹ˆë‹¤.
                        </p>
                    </div>
                </div>
            </div>

            <!-- 5ê°€ì§€ ìš´ëª… ì˜ˆì¸¡ -->
            <div class="destiny-section">
                <h2 class="section-title">
                    <span class="section-icon">ğŸ”®</span>
                    5ê°€ì§€ ìš´ëª… ì˜ˆì¸¡
                </h2>
                <div class="destiny-grid" id="destinyGrid">
                    <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                </div>
            </div>

            <!-- ê´€ê³„ ë¶„ì„ (ìˆì„ ê²½ìš°ì—ë§Œ) -->
            <div class="relationship-section" id="relationshipSection" style="display: none;">
                <h2 class="section-title">
                    <span class="section-icon">ğŸ’•</span>
                    ê´€ê³„ ë¶„ì„
                </h2>
                <div class="relationship-grid">
                    <div class="person-card">
                        <div class="person-name" id="user1Name">ë‚˜</div>
                        <div class="person-type" id="user1Type">ì„±ì¥í˜•</div>
                        <div id="user1Traits"></div>
                    </div>
                    <div class="person-card">
                        <div class="person-name" id="user2Name">ìƒëŒ€ë°©</div>
                        <div class="person-type" id="user2Type">ì•ˆì •í˜•</div>
                        <div id="user2Traits"></div>
                    </div>
                </div>
                <div style="margin-top: 24px; text-align: center;">
                    <h3 style="color: #667eea; margin-bottom: 12px;">ê´€ê³„ ì¡°í™”ë„</h3>
                    <div class="compatibility-bar" style="max-width: 400px; margin: 0 auto;">
                        <div class="compatibility-fill" id="compatibilityFill" style="width: 0%;"></div>
                    </div>
                    <p id="compatibilityScore" style="margin-top: 8px; font-size: 18px; font-weight: 600; color: #667eea;">
                        85ì 
                    </p>
                </div>
            </div>

            <!-- 30ì¼ ë¡œë“œë§µ -->
            <div class="roadmap-section">
                <h2 class="section-title">
                    <span class="section-icon">ğŸ—ºï¸</span>
                    30ì¼ ê¸°ì  ë¡œë“œë§µ
                </h2>
                <div class="timeline" id="roadmapTimeline">
                    <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                </div>

                <!-- PDF ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ -->
                <div style="text-align: center; margin-top: 32px;" class="no-print">
                    <button class="btn btn-secondary" onclick="downloadPDF()" style="display: inline-flex; align-items: center; gap: 8px;">
                        <span>ğŸ“„</span> PDFë¡œ ì €ì¥
                    </button>
                </div>
            </div>

            <!-- ì•¡ì…˜ ë²„íŠ¼ -->
            <div class="action-buttons">
                <button class="btn btn-primary" onclick="startDailyMessages()">
                    7ì¼ ì‘ì› ë©”ì‹œì§€ ì‹œì‘í•˜ê¸°
                </button>
                <button class="btn btn-secondary" onclick="shareResult()">
                    ê²°ê³¼ ê³µìœ í•˜ê¸°
                </button>
            </div>

            <!-- í‘¸í„° -->
            <footer class="footer no-print">
                <div class="footer-links">
                    <a href="./privacy.html">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
                    <a href="./terms.html">ì´ìš©ì•½ê´€</a>
                    <a href="./questions.html">ê¸°ì  ë¶„ì„</a>
                    <a href="./wish-voyage.html">ì†Œì›í•­í•´</a>
                </div>
                <div class="business-info">
                    <div class="line">
                        (ì£¼)ì–´ìˆ˜ì—¬í–‰ì„¼í„°<span class="separator">|</span>ëŒ€í‘œ: ì´ì„¸ì§„<span class="separator">|</span>ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸: 409-87-00585
                    </div>
                    <div class="line">
                        ì „ë¼ë‚¨ë„ ì—¬ìˆ˜ì‹œ ë°•ëŒíšŒê¸¸ 1, Cë™ CD-305í˜¸ (ë•ì¶©ë™)<span class="separator">|</span>í†µì‹ íŒë§¤ì—…: 2016-ì „ë¼ë‚¨ë„-0146í˜¸<span class="separator">|</span>ì „í™”: 1899-6117
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <script>
        let analysisData = null;

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë°ì´í„° ë¡œë“œ
        window.addEventListener('load', async () => {
            try {
                // localStorage ë˜ëŠ” APIì—ì„œ ìµœì‹  ë¶„ì„ ê²°ê³¼ ê°€ì ¸ì˜¤ê¸°
                const stored = localStorage.getItem('latestAnalysis');
                if (stored) {
                    analysisData = JSON.parse(stored);
                } else {
                    // APIì—ì„œ ìµœì‹  ê²°ê³¼ ê°€ì ¸ì˜¤ê¸°
                    const response = await fetch('/api/story/latest');
                    analysisData = await response.json();
                }

                if (analysisData && analysisData.story) {
                    renderResults(analysisData.story);
                } else {
                    throw new Error('No analysis data found');
                }
            } catch (error) {
                console.error('Error loading analysis:', error);
                document.getElementById('loading').innerHTML = '<p>ë¶„ì„ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</p>';
            }
        });

        function renderResults(story) {
            const { userProfile, counterpartyProfile, relationshipAnalysis, actionPlan } = story;

            // ê¸°ì ì§€ìˆ˜ í‘œì‹œ
            document.getElementById('userName').textContent = userProfile.name || 'ì‚¬ìš©ì';
            document.getElementById('miracleIndex').textContent = userProfile.miracleIndex || 75;
            document.getElementById('indexDescription').textContent =
                getIndexDescription(userProfile.miracleIndex);

            // 5ê°€ì§€ ìš´ëª… ì˜ˆì¸¡ ìƒì„±
            renderDestinyPredictions(userProfile);

            // ê´€ê³„ ë¶„ì„ (ìˆì„ ê²½ìš°)
            if (counterpartyProfile && relationshipAnalysis) {
                renderRelationshipAnalysis(userProfile, counterpartyProfile, relationshipAnalysis);
            }

            // 30ì¼ ë¡œë“œë§µ
            renderRoadmap(actionPlan);

            // ë¡œë”© ìˆ¨ê¸°ê³  ì½˜í…ì¸  í‘œì‹œ
            document.getElementById('loading').style.display = 'none';
            document.getElementById('content').style.display = 'block';

            // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
            animateCompatibilityBar();
        }

        function getIndexDescription(index) {
            if (index >= 80) return 'ë†€ë¼ìš´ ê°€ëŠ¥ì„±ì´ ë³´ì…ë‹ˆë‹¤! ë‹¹ì‹ ì€ ì´ë¯¸ ë³€í™”ë¥¼ ìœ„í•œ ê°•í•œ ì˜ì§€ì™€ ì¤€ë¹„ê°€ ë˜ì–´ ìˆìŠµë‹ˆë‹¤.';
            if (index >= 60) return 'ê¸ì •ì ì¸ ë³€í™”ì˜ ì”¨ì•—ì´ ì‹¬ì–´ì ¸ ìˆìŠµë‹ˆë‹¤. ì¡°ê¸ˆë§Œ ë” ë…¸ë ¥í•˜ë©´ í° ë³€í™”ë¥¼ ê²½í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
            if (index >= 40) return 'ë³€í™”ë¥¼ ìœ„í•œ ê¸°ë°˜ì´ ë§ˆë ¨ë˜ì—ˆìŠµë‹ˆë‹¤. ê¾¸ì¤€í•œ ì‹¤ì²œì´ ê¸°ì ì„ ë§Œë“¤ì–´ë‚¼ ê²ƒì…ë‹ˆë‹¤.';
            return 'ìƒˆë¡œìš´ ì‹œì‘ì˜ ë‹¨ê³„ì…ë‹ˆë‹¤. ì‘ì€ ë³€í™”ë¶€í„° ì‹œì‘í•´ë³´ì„¸ìš”.';
        }

        function renderDestinyPredictions(userProfile) {
            const predictions = [
                {
                    icon: 'ğŸ’',
                    title: 'ê´€ê³„ì˜ ìš´ëª…',
                    description: userProfile.insights?.[0] || 'ì†Œì¤‘í•œ ê´€ê³„ë“¤ì´ ë”ìš± ê¹Šì–´ì§€ê³  ì˜ë¯¸ìˆê²Œ ë°œì „í•  ê²ƒì…ë‹ˆë‹¤. ì†”ì§í•œ ëŒ€í™”ê°€ ê´€ê³„ë¥¼ ë³€í™”ì‹œí‚¬ ì—´ì‡ ê°€ ë©ë‹ˆë‹¤.'
                },
                {
                    icon: 'ğŸŒŸ',
                    title: 'ì„±ì¥ì˜ ìš´ëª…',
                    description: userProfile.insights?.[1] || 'ë‚´ë©´ì˜ ì„±ì¥ê³¼ í•¨ê»˜ ì™¸ì ì¸ ì„±ê³µë„ í•¨ê»˜ ì°¾ì•„ì˜µë‹ˆë‹¤. ìƒˆë¡œìš´ ê¸°íšŒê°€ ë‹¹ì‹ ì„ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤.'
                },
                {
                    icon: 'ğŸ¯',
                    title: 'ëª©í‘œì˜ ìš´ëª…',
                    description: userProfile.insights?.[2] || 'ëª…í™•í•œ ëª©í‘œ ì„¤ì •ì´ ì„±ê³µì˜ 90%ì…ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ëª©í‘œëŠ” ì´ë¯¸ ì‹¤í˜„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.'
                },
                {
                    icon: 'ğŸ’«',
                    title: 'ë³€í™”ì˜ ìš´ëª…',
                    description: userProfile.insights?.[3] || 'í° ë³€í™”ì˜ ì‹œê¸°ê°€ ë‹¤ê°€ì˜¤ê³  ìˆìŠµë‹ˆë‹¤. ë‘ë ¤ì›Œí•˜ì§€ ë§ê³  ë°›ì•„ë“¤ì´ì„¸ìš”. ê¸ì •ì ì¸ ë³€í™”ì…ë‹ˆë‹¤.'
                },
                {
                    icon: 'ğŸŒˆ',
                    title: 'í–‰ë³µì˜ ìš´ëª…',
                    description: userProfile.insights?.[4] || 'ì§„ì •í•œ í–‰ë³µì€ ë‚´ë©´ì—ì„œ ì‹œì‘ë©ë‹ˆë‹¤. ì‘ì€ ê¸°ì¨ë“¤ì„ ì†Œì¤‘íˆ ì—¬ê¸°ë©´ í° í–‰ë³µì´ ì°¾ì•„ì˜µë‹ˆë‹¤.'
                }
            ];

            const grid = document.getElementById('destinyGrid');
            grid.innerHTML = predictions.map(p => `
                <div class="destiny-card">
                    <div class="icon">${p.icon}</div>
                    <h3>${p.title}</h3>
                    <p>${p.description}</p>
                </div>
            `).join('');
        }

        function renderRelationshipAnalysis(user, counterparty, analysis) {
            const section = document.getElementById('relationshipSection');
            section.style.display = 'block';

            document.getElementById('user1Name').textContent = user.name || 'ë‚˜';
            document.getElementById('user1Type').textContent = user.element || 'ì„±ì¥í˜•';
            document.getElementById('user1Traits').innerHTML =
                (user.strengths || ['ê¸ì •ì ', 'ëˆê¸°ìˆëŠ”']).map(s =>
                    `<span class="action-tag">${s}</span>`
                ).join('');

            document.getElementById('user2Name').textContent = counterparty.name || 'ìƒëŒ€ë°©';
            document.getElementById('user2Type').textContent = counterparty.element || 'ì•ˆì •í˜•';
            document.getElementById('user2Traits').innerHTML =
                (counterparty.strengths || ['ì‹ ì¤‘í•œ', 'ë°°ë ¤í•˜ëŠ”']).map(s =>
                    `<span class="action-tag">${s}</span>`
                ).join('');

            const score = analysis.compatibilityScore || 75;
            document.getElementById('compatibilityScore').textContent = score + 'ì ';
            document.getElementById('compatibilityFill').style.width = score + '%';
        }

        function renderRoadmap(actionPlan) {
            const defaultWeeks = [
                {
                    week: 'Week 1',
                    title: 'ìê¸° ì¸ì‹ & ëª©í‘œ ì„¤ì •',
                    description: 'í˜„ì¬ ìƒí™©ì„ ì •í™•íˆ íŒŒì•…í•˜ê³ , ëª…í™•í•œ ëª©í‘œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.',
                    actions: ['ì¼ê¸° ì“°ê¸°', 'ëª©í‘œ êµ¬ì²´í™”', 'ê°•ì  íŒŒì•…']
                },
                {
                    week: 'Week 2',
                    title: 'ê´€ê³„ ê°œì„  ì‹œì‘',
                    description: 'ì‘ì€ ë³€í™”ë¶€í„° ì‹œì‘í•©ë‹ˆë‹¤. ì†”ì§í•œ ëŒ€í™”ë¥¼ ì‹œë„í•´ë³´ì„¸ìš”.',
                    actions: ['ê°ì‚¬ í‘œí˜„í•˜ê¸°', 'ê²½ì²­ ì—°ìŠµ', 'ê³µê° í‘œí˜„']
                },
                {
                    week: 'Week 3',
                    title: 'ìŠµê´€ í˜•ì„±',
                    description: 'ê¸ì •ì ì¸ ìŠµê´€ì„ ë§Œë“¤ì–´ê°‘ë‹ˆë‹¤. ê¾¸ì¤€í•¨ì´ ê¸°ì ì„ ë§Œë“­ë‹ˆë‹¤.',
                    actions: ['ì¼ì¼ ë£¨í‹´', 'ê°ì • ì¼ê¸°', 'ìê¸° ëŒë´„']
                },
                {
                    week: 'Week 4',
                    title: 'ì„±ê³¼ í™•ì¸ & ë‹¤ìŒ ë‹¨ê³„',
                    description: 'ì§€ë‚œ í•œ ë‹¬ì„ ëŒì•„ë³´ê³ , ì•ìœ¼ë¡œì˜ ê³„íšì„ ì„¸ì›ë‹ˆë‹¤.',
                    actions: ['ì„±ì¥ í™•ì¸', 'ê°ì‚¬ ë‚˜ëˆ„ê¸°', 'ìƒˆ ëª©í‘œ ì„¤ì •']
                }
            ];

            const timeline = document.getElementById('roadmapTimeline');
            const weeks = actionPlan?.weeks || defaultWeeks;

            timeline.innerHTML = weeks.map(week => `
                <div class="timeline-week">
                    <div class="week-number">${week.week || week.weekNumber}</div>
                    <div class="week-title">${week.title || week.focus}</div>
                    <div class="week-description">${week.description || week.goal}</div>
                    <div class="week-actions">
                        ${(week.actions || week.tasks || []).map(action =>
                            `<span class="action-tag">${action}</span>`
                        ).join('')}
                    </div>
                </div>
            `).join('');
        }

        function animateCompatibilityBar() {
            const fill = document.getElementById('compatibilityFill');
            if (fill) {
                setTimeout(() => {
                    fill.style.width = fill.style.width;
                }, 500);
            }
        }

        function startDailyMessages() {
            window.location.href = './daily-messages.html';
        }

        function shareResult() {
            if (navigator.share) {
                navigator.share({
                    title: 'ë‚˜ì˜ ê¸°ì  ì§€ìˆ˜',
                    text: `ë‚´ ê¸°ì  ì§€ìˆ˜ëŠ” ${document.getElementById('miracleIndex').textContent}ì ! ë‹¹ì‹ ë„ í™•ì¸í•´ë³´ì„¸ìš”!`,
                    url: window.location.href
                });
            } else {
                alert('ê³µìœ  ê¸°ëŠ¥ì´ ì§€ì›ë˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤.');
            }
        }

        function downloadPDF() {
            window.print();
        }
    </script>
</body>
</html>
